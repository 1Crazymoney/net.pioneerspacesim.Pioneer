{
	"app-id": "net.pioneerspacesim.Pioneer",
	"runtime": "org.freedesktop.Platform",
	"runtime-version": "1.6",
	"sdk": "org.freedesktop.Sdk",
	"command": "pioneer",

	"finish-args": [
		"--share=ipc",
		"--socket=x11",
		"--socket=wayland",
		"--socket=pulseaudio",
		"--device=dri",
		"--persist=.pioneer"
	],

	"build-options" : {
		"cflags": "-O3 -g",
		"cxxflags": "-O3 -g",
		"env": {
			"PIONEER_DATA_DIR": "/app/usr/share/pioneer"
		}
	},

	"modules": [
		{
			"name": "sigcpp",
			"sources": [
				{
					"type": "archive",
					"url": "http://ftp.acc.umu.se/pub/GNOME/sources/libsigc++/2.10/libsigc++-2.10.0.tar.xz",
					"sha256": "f843d6346260bfcb4426259e314512b99e296e8ca241d771d21ac64f28298d81"
				}
			]
		},
		{
			"name": "assimp",
			"buildsystem": "cmake",
			"config-opts": [
				"-DASSIMP_BUILD_ALL_IMPORTERS_BY_DEFAULT:BOOL=NO",
				"-DASSIMP_BUILD_COLLADA_IMPORTER:BOOL=YES",
				"-DASSIMP_BUILD_OBJ_IMPORTER:BOOL=YES",
				"-DASSIMP_BUILD_3MF_IMPORTER:BOOL=YES",
				"-DASSIMP_BUILD_ASSIMP_TOOLS:BOOL=NO",
				"-DASSIMP_BUILD_TESTS:BOOL=NO"
			],
			"sources": [
				{
					"type": "archive",
					"url": "https://github.com/assimp/assimp/archive/v4.1.0.tar.gz",
					"sha256": "3520b1e9793b93a2ca3b797199e16f40d61762617e072f2d525fad70f9678a71"
				}
			]
		},
		"shared-modules/glu/glu-9.0.0.json",
		{
			"name": "pioneer",
			"buildsystem": "autotools",
			"build-commands": [
				"for i in 16 22 24 32 40 48 64 128 256 ; do install -Dm644 application-icon/pngs/pioneer-${i}x${i}.png /app/share/icons/hicolor/${i}x${i}/apps/net.pioneerspacesim.Pioneer.png ; done",
			],
			"sources": [
				{
					"type": "git",
					"url": "https://github.com/pioneerspacesim/Pioneer.git",
					"branch": "20180203"
				}
			]
		},
		{
			"name": "pioneer-metadata",
			"buildsystem": "simple",
			"build-commands": [
				"install -Dm644 pioneer.desktop /app/share/applications/net.pioneerspacesim.Pioneer.desktop",
				"install -Dm644 pioneer.appdata.xml /app/share/appdata/net.pioneerspacesim.Pioneer.appdata.xml"
			],
			"sources": [
				{ "type": "file", "path": "pioneer.desktop" },
				{ "type": "file", "path": "pioneer.appdata.xml" }
			]
		}
	]
}
